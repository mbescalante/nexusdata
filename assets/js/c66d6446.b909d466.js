"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2486],{7789:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"graphql-api/queries","title":"Consultas","description":"Las consultas GraphQL te permiten solicitar exactamente los datos que necesitas de tu API NexusData. A diferencia de las API REST tradicionales, GraphQL te da la flexibilidad de especificar la estructura exacta de la respuesta.","source":"@site/docs/graphql-api/queries.md","sourceDirName":"graphql-api","slug":"/graphql-api/queries","permalink":"/nexusdata/docs/graphql-api/queries","draft":false,"unlisted":false,"editUrl":"https://github.com/mbescalante/nexusdata/edit/main/docs/graphql-api/queries.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Funciones Clave","permalink":"/nexusdata/docs/graphql-api/"},"next":{"title":"Mutaciones","permalink":"/nexusdata/docs/graphql-api/mutations"}}');var s=n(4848),i=n(8453);const l={sidebar_position:1},c="Consultas",t={},o=[{value:"Estructura B\xe1sica de Consultas",id:"estructura-b\xe1sica-de-consultas",level:2},{value:"Consultas Generadas Autom\xe1ticamente",id:"consultas-generadas-autom\xe1ticamente",level:2},{value:"Consulta Individual (findUnique)",id:"consulta-individual-findunique",level:3},{value:"Consulta de M\xfaltiples Registros (findMany)",id:"consulta-de-m\xfaltiples-registros-findmany",level:3},{value:"Consulta de Primer Registro (findFirst)",id:"consulta-de-primer-registro-findfirst",level:3},{value:"Consulta de Agregaci\xf3n (aggregate)",id:"consulta-de-agregaci\xf3n-aggregate",level:3},{value:"Consulta de Conteo (count)",id:"consulta-de-conteo-count",level:3},{value:"Filtros Avanzados",id:"filtros-avanzados",level:2},{value:"Operadores de Comparaci\xf3n",id:"operadores-de-comparaci\xf3n",level:3},{value:"Operadores L\xf3gicos",id:"operadores-l\xf3gicos",level:3},{value:"Filtros en Relaciones",id:"filtros-en-relaciones",level:3},{value:"Selecci\xf3n de Campos",id:"selecci\xf3n-de-campos",level:2},{value:"Paginaci\xf3n",id:"paginaci\xf3n",level:2},{value:"Paginaci\xf3n Offset",id:"paginaci\xf3n-offset",level:3},{value:"Paginaci\xf3n por Cursor",id:"paginaci\xf3n-por-cursor",level:3},{value:"Consultas con Variables",id:"consultas-con-variables",level:2},{value:"Fragmentos",id:"fragmentos",level:2},{value:"Alias",id:"alias",level:2},{value:"Directivas",id:"directivas",level:2},{value:"Consultas Personalizadas",id:"consultas-personalizadas",level:2},{value:"Pr\xf3ximos Pasos",id:"pr\xf3ximos-pasos",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"consultas",children:"Consultas"})}),"\n",(0,s.jsx)(r.p,{children:"Las consultas GraphQL te permiten solicitar exactamente los datos que necesitas de tu API NexusData. A diferencia de las API REST tradicionales, GraphQL te da la flexibilidad de especificar la estructura exacta de la respuesta."}),"\n",(0,s.jsx)(r.h2,{id:"estructura-b\xe1sica-de-consultas",children:"Estructura B\xe1sica de Consultas"}),"\n",(0,s.jsx)(r.p,{children:"Una consulta GraphQL b\xe1sica tiene la siguiente estructura:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:"query {\r\n  modelName(where: { field: value }) {\r\n    field1\r\n    field2\r\n    relation {\r\n      field1\r\n      field2\r\n    }\r\n  }\r\n};\n"})}),"\n",(0,s.jsx)(r.h2,{id:"consultas-generadas-autom\xe1ticamente",children:"Consultas Generadas Autom\xe1ticamente"}),"\n",(0,s.jsx)(r.p,{children:"NexusData genera autom\xe1ticamente las siguientes consultas para cada modelo:"}),"\n",(0,s.jsx)(r.h3,{id:"consulta-individual-findunique",children:"Consulta Individual (findUnique)"}),"\n",(0,s.jsx)(r.p,{children:"Recupera un \xfanico registro por su ID o campo \xfanico:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  user(where: { id: "123" }) {\r\n    id\r\n    email\r\n    firstName\r\n    lastName\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:"Tambi\xe9n puedes consultar por cualquier campo \xfanico:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  user(where: { email: "usuario@ejemplo.com" }) {\r\n    id\r\n    email\r\n    profile {\r\n      bio\r\n      avatarUrl\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"consulta-de-m\xfaltiples-registros-findmany",children:"Consulta de M\xfaltiples Registros (findMany)"}),"\n",(0,s.jsx)(r.p,{children:"Recupera m\xfaltiples registros con filtros, ordenamiento y paginaci\xf3n:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  users(\r\n    where: { role: "ADMIN" }\r\n    orderBy: { createdAt: DESC }\r\n    skip: 0\r\n    take: 10\r\n  ) {\r\n    id\r\n    email\r\n    firstName\r\n    lastName\r\n    createdAt\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"consulta-de-primer-registro-findfirst",children:"Consulta de Primer Registro (findFirst)"}),"\n",(0,s.jsx)(r.p,{children:"Recupera el primer registro que coincida con los criterios:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:"query {\r\n  firstActiveUser: user(\r\n    where: { isActive: true }\r\n    orderBy: { createdAt: ASC }\r\n  ) {\r\n    id\r\n    email\r\n    lastLogin\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"consulta-de-agregaci\xf3n-aggregate",children:"Consulta de Agregaci\xf3n (aggregate)"}),"\n",(0,s.jsx)(r.p,{children:"Realiza operaciones de agregaci\xf3n en tus datos:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  aggregateProducts(where: { category: "Electronics" }) {\r\n    count\r\n    price {\r\n      avg\r\n      min\r\n      max\r\n      sum\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"consulta-de-conteo-count",children:"Consulta de Conteo (count)"}),"\n",(0,s.jsx)(r.p,{children:"Cuenta registros que coinciden con ciertos criterios:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  userCount(where: { role: "USER", isActive: true })\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"filtros-avanzados",children:"Filtros Avanzados"}),"\n",(0,s.jsx)(r.p,{children:"NexusData soporta una amplia variedad de operadores de filtrado:"}),"\n",(0,s.jsx)(r.h3,{id:"operadores-de-comparaci\xf3n",children:"Operadores de Comparaci\xf3n"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  products(\r\n    where: {\r\n      AND: [\r\n        { price: { gt: 100 } },\r\n        { price: { lt: 500 } },\r\n        { stock: { gte: 10 } },\r\n        { name: { contains: "Phone" } }\r\n      ]\r\n    }\r\n  ) {\r\n    id\r\n    name\r\n    price\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"operadores-l\xf3gicos",children:"Operadores L\xf3gicos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  articles(\r\n    where: {\r\n      OR: [\r\n        { category: "Technology" },\r\n        { category: "Science" }\r\n      ],\r\n      AND: [\r\n        { publishedAt: { not: null } },\r\n        { publishedAt: { lt: "2023-01-01T00:00:00Z" } }\r\n      ]\r\n    }\r\n  ) {\r\n    id\r\n    title\r\n    publishedAt\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"filtros-en-relaciones",children:"Filtros en Relaciones"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  posts(\r\n    where: {\r\n      author: {\r\n        is: {\r\n          role: "EDITOR"\r\n        }\r\n      },\r\n      comments: {\r\n        some: {\r\n          content: {\r\n            contains: "great"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ) {\r\n    id\r\n    title\r\n    author {\r\n      name\r\n      role\r\n    }\r\n    commentCount\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"selecci\xf3n-de-campos",children:"Selecci\xf3n de Campos"}),"\n",(0,s.jsx)(r.p,{children:"GraphQL te permite seleccionar exactamente los campos que necesitas:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  products(where: { category: "Electronics" }) {\r\n    id\r\n    name\r\n    price\r\n    # Solo incluir la descripci\xf3n para productos espec\xedficos\r\n    ... on SmartphoneProduct {\r\n      description\r\n      specifications {\r\n        cpu\r\n        memory\r\n        storage\r\n      }\r\n    }\r\n    # Incluir informaci\xf3n del fabricante\r\n    manufacturer {\r\n      name\r\n      country\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"paginaci\xf3n",children:"Paginaci\xf3n"}),"\n",(0,s.jsx)(r.p,{children:"NexusData soporta m\xfaltiples estrategias de paginaci\xf3n:"}),"\n",(0,s.jsx)(r.h3,{id:"paginaci\xf3n-offset",children:"Paginaci\xf3n Offset"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:"query {\r\n  products(\r\n    skip: 20,\r\n    take: 10,\r\n    orderBy: { createdAt: DESC }\r\n  ) {\r\n    id\r\n    name\r\n    price\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"paginaci\xf3n-por-cursor",children:"Paginaci\xf3n por Cursor"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  products(\r\n    first: 10,\r\n    after: "cursor_value",\r\n    orderBy: { createdAt: DESC }\r\n  ) {\r\n    edges {\r\n      node {\r\n        id\r\n        name\r\n        price\r\n      }\r\n      cursor\r\n    }\r\n    pageInfo {\r\n      hasNextPage\r\n      endCursor\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"consultas-con-variables",children:"Consultas con Variables"}),"\n",(0,s.jsx)(r.p,{children:"Las variables GraphQL te permiten reutilizar consultas y pasar valores din\xe1micos:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:"query GetUserById($id: ID!) {\r\n  user(where: { id: $id }) {\r\n    id\r\n    email\r\n    firstName\r\n    lastName\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:"Variables:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\r\n  "id": "123"\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"fragmentos",children:"Fragmentos"}),"\n",(0,s.jsx)(r.p,{children:"Los fragmentos te permiten reutilizar partes de tus consultas:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'fragment UserBasicInfo on User {\r\n  id\r\n  email\r\n  firstName\r\n  lastName\r\n}\r\n\r\nfragment UserDetailedInfo on User {\r\n  ...UserBasicInfo\r\n  role\r\n  createdAt\r\n  lastLogin\r\n  profile {\r\n    bio\r\n    avatarUrl\r\n  }\r\n}\r\n\r\nquery {\r\n  activeUsers: users(where: { isActive: true }) {\r\n    ...UserBasicInfo\r\n  }\r\n  \r\n  adminUsers: users(where: { role: "ADMIN" }) {\r\n    ...UserDetailedInfo\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"alias",children:"Alias"}),"\n",(0,s.jsx)(r.p,{children:"Los alias te permiten renombrar campos y consultar el mismo tipo m\xfaltiples veces:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  activeUsers: users(where: { isActive: true }) {\r\n    id\r\n    email\r\n  }\r\n  \r\n  inactiveUsers: users(where: { isActive: false }) {\r\n    id\r\n    email\r\n  }\r\n  \r\n  adminUser: user(where: { id: "123" }) {\r\n    id\r\n    email\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"directivas",children:"Directivas"}),"\n",(0,s.jsx)(r.p,{children:"Las directivas te permiten incluir o excluir campos condicionalmente:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:"query GetUser($id: ID!, $includeDetails: Boolean!) {\r\n  user(where: { id: $id }) {\r\n    id\r\n    email\r\n    firstName\r\n    lastName\r\n    # Solo incluir estos campos si includeDetails es true\r\n    role @include(if: $includeDetails)\r\n    createdAt @include(if: $includeDetails)\r\n    profile @include(if: $includeDetails) {\r\n      bio\r\n      avatarUrl\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:"Variables:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\r\n  "id": "123",\r\n  "includeDetails": true\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"consultas-personalizadas",children:"Consultas Personalizadas"}),"\n",(0,s.jsx)(r.p,{children:"Adem\xe1s de las consultas generadas autom\xe1ticamente, puedes definir consultas personalizadas:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-javascript",children:"// src/resolvers/analytics/topProducts.js\r\nmodule.exports = {\r\n  name: 'topProducts',\r\n  type: '[Product]',\r\n  args: {\r\n    category: 'String',\r\n    period: { type: 'String', default: '30days' }\r\n  },\r\n  resolve: async (parent, args, context) => {\r\n    const { category, period } = args;\r\n    const { models } = context;\r\n    \r\n    // L\xf3gica personalizada para calcular productos m\xe1s vendidos\r\n    // ...\r\n    \r\n    return topProducts;\r\n  }\r\n};\n"})}),"\n",(0,s.jsx)(r.p,{children:"Uso:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-graphql",children:'query {\r\n  topProducts(category: "Electronics", period: "90days") {\r\n    id\r\n    name\r\n    price\r\n    salesCount\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"pr\xf3ximos-pasos",children:"Pr\xf3ximos Pasos"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Aprende sobre mutaciones GraphQL para modificar datos"}),"\n",(0,s.jsx)(r.li,{children:"Explora suscripciones GraphQL para datos en tiempo real"}),"\n",(0,s.jsx)(r.li,{children:"Implementa l\xf3gica de negocio personalizada en tus resolvers"}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>c});var a=n(6540);const s={},i=a.createContext(s);function l(e){const r=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(i.Provider,{value:r},e.children)}}}]);